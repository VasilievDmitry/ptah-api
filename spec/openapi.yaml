openapi: 3.0.0
# Added by API Auto Mocking Plugin
servers:
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/JamesKotov/PTAH/1.2.0

info:
  description: This is an API for PTAH to manage landing pages
  version: "1.2.0"
  title: PTAH Backend API
  termsOfService: ''
  contact:
    email: evgeniy.strigo@protocol.one
    name: Evgeniy Strigo
    url: 'https://protocol.one'

tags:
  - name: Health
    description: Healthcheck api
  - name: User
    description: User info
  - name: Landings
    description: Operations with landings
  - name: Mailchimp
    description: Intergation with mailchimp

paths:
  /api/v1/landings:
    get:
      tags:
        - Landings
      summary: List of landings for user
      operationId: listLandings
      security:
        - bearerAuth: []
      responses:
        '200':
          description: list of found landings
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                type: object
                properties:
                  landings:
                    type: array
                    description: landing description
                    items:
                      $ref: '#/components/schemas/LandingMeta'
        '401':
          description: Unauthorized
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorUnathorized'
    post:
      tags:
        - Landings
      summary: Adds a new landing for user
      operationId: addLanding
      description: Adds a landing for user
      security:
        - bearerAuth: []
      responses:
        '201':
          description: Item created
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LandingMeta'
        '400':
          description: Bad request
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorUnathorized'
      requestBody:
        description: Landing page to add
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: 'My first landing'
                landing:
                  $ref: '#/components/schemas/Landing'

  /api/v1/landings/copy:
    post:
      tags:
        - Landings
      summary: Mass copy of landings
      operationId: copyLandings
      description: Mass copy of landings
      security:
        - bearerAuth: []
      responses:
        '204':
          description: Items copied
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
        '400':
          description: Bad request
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorUnathorized'
        '404':
          description: Landing not found
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorNotFound'
      requestBody:
        description: Landing items to copy
        content:
          application/json:
            schema:
              type: object
              properties:
                ids:
                  type: array
                  description: landings ids
                  items:
                    type: string
                  example: ['507f191e810c19729de860ea', '29de860ea507f191e810c197']

  /api/v1/landings/{landingId}:
    get:
      tags:
        - Landings
      summary: Returns full description of some landing by it's id
      operationId: getLanding
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: landingId
          required: true
          schema:
            type: string
            example: '507f191e810c19729de860ea'
          description: Landing id
      responses:
        '200':
          description: Requested landing description
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LandingFull'
        '400':
          description: Bad request
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorUnathorized'
        '404':
          description: Landing not found
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorNotFound'

    patch:
      tags:
        - Landings
      summary: Updates a landing
      operationId: updateLanding
      description: Updates a landing with passed id
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: landingId
          required: true
          schema:
            type: string
            example: '507f191e810c19729de860ea'
          description: Landing id
      responses:
        '200':
          description: Item updated
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LandingMeta'
        '400':
          description: Bad request
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorUnathorized'
        '404':
          description: Landing not found
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorNotFound'
        '412':
          description: Precondition Failed
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorPreconditionFailed'

      requestBody:
        description: Landing page to change
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: 'My first landing'
                baseVersion:
                  type: number
                  example: 1
                landing:
                  $ref: '#/components/schemas/Landing'

    delete:
      tags:
        - Landings
      summary: Deletes a landing
      operationId: deleteLanding
      description: Delete a landing with passed id
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: landingId
          required: true
          schema:
            type: string
            example: '507f191e810c19729de860ea'
          description: Landing id
      responses:
        '204':
          description: Item deleted
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
        '400':
          description: Bad request
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorUnathorized'
        '404':
          description: Landing not found
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorNotFound'

  /api/v1/landings/{landingId}/publishing:

    post:
      tags:
        - Landings
      summary: Publish or republish a landing
      operationId: publishLanding
      description: (Re)Publish a landing with passed id
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: landingId
          required: true
          schema:
            type: string
            example: '507f191e810c19729de860ea'
          description: Landing id
      responses:
        '200':
          description: Item published
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LandingMeta'
        '400':
          description: Bad request
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorUnathorized'
        '404':
          description: Landing not found
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorNotFound'
      requestBody:
        description: Attached zip archive with rendered landing content
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: application/zip

    delete:
      tags:
        - Landings
      summary: Unpublish a landing
      operationId: unpublishLanding
      description: Unpublishing a landing with passed id
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: landingId
          required: true
          schema:
            type: string
            example: '507f191e810c19729de860ea'
          description: Landing id
      responses:
        '200':
          description: Item unpublished
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LandingMeta'
        '400':
          description: Bad request
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorUnathorized'
        '404':
          description: Landing not found
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorNotFound'

  /api/v1/landings/{landingId}/domain:

    post:
      tags:
        - Landings
      summary: Set or change an external domain for landing
      operationId: setLandingDomain
      description: Set or change an external domain for landing
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: landingId
          required: true
          schema:
            type: string
            example: '507f191e810c19729de860ea'
          description: Landing id
      responses:
        '200':
          description: Domain changed
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LandingMeta'
        '400':
          description: Bad request
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorUnathorized'
        '404':
          description: Landing not found
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorNotFound'
      requestBody:
        description: New domain to set
        content:
          application/json:
            schema:
              type: object
              properties:
                domain:
                  type: string
                  example: 'My first landing'

    delete:
      tags:
        - Landings
      summary: Remove an external domain for landing
      operationId: unpublishLanding
      description: Remove an external domain for landing
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: landingId
          required: true
          schema:
            type: string
            example: '507f191e810c19729de860ea'
          description: Landing id
      responses:
        '200':
          description: Domain removed
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LandingMeta'
        '400':
          description: Bad request
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorUnathorized'
        '404':
          description: Landing not found
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorNotFound'

  /api/v1/_healthz:
    get:
      tags:
        - Health
      summary: Health check
      operationId: healthCheck
      responses:
        '200':
          description: empty object that means all ok
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Internal Server Error
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorInternalServerError'

  /api/v1/user:
    get:
      tags:
        - User
      summary: User info
      operationId: userInfo
      security:
        - bearerAuth: []
      responses:
        '200':
          description: User data
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserInfo'

        '401':
          description: Unauthorized
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorUnathorized'

  /api/v1/mailchimp/login:
    get:
      tags:
        - Mailchimp
      summary: Mailchimp authentication start page
      operationId: mailchimpLogin
      security:
        - bearerAuth: []
      description: This url must be open in iframe
      responses:
        '200':
          description: Html page, sending an result of authentication as a postMessage to parent window
          content:
            text/html:
              schema:
                type: string
        '302':
          description: Redirect to auth1 server

  /api/v1/mailchimp/callback:
    get:
      tags:
        - Mailchimp
      summary: Mailchimp authentication finish page
      operationId: mailchimpCallback
      security:
        - bearerAuth: []
      description: This url will be opened in previous iframe after authentication process completes
      responses:
        '200':
          description: Html page, sending an result of authentication as a postMessage to parent window
          content:
            text/html:
              schema:
                type: string


  /api/v1/mailchimp/maillists:
    get:
      tags:
        - Mailchimp
      summary: List of user's maillists on mailchimp
      operationId: mailchimpLists
      security:
        - bearerAuth: []
      responses:
        '200':
          description: list of found maillists
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                type: object
                properties:
                  maillists:
                    type: array
                    description: maillists
                    items:
                      type: object
        '401':
          description: Unauthorized
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorUnathorized'
        '412':
          description: Precondition Failed - user don't have integration with mailchimp
            or mailchimp's auth token is expired. You need to re-login to mailchimp.
          headers:
            X-Request-ID:
              schema:
                type: string
                format: uuid
                description: Unique id of current request, to match records in log
                example: 'f7314976-f9fc-450f-b46e-b77fbe793f94'
            Date:
              schema:
                type: string
                description: Current server date and time
                example: 'Thu, 24 Jan 2019 13:03:49 GMT'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorPreconditionFailed'

components:

  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:

    Error:
      type: object
      required:
        - error
      properties:
        error:
          type: object
          required:
            - code
            - message
          properties:
            code:
              type: number
              description: 'Error code'
              example: 400
            message:
              type: string
              description: 'Text of error'
              example: Bad request

    ErrorUnathorized:
      type: object
      required:
        - error
      properties:
        error:
          type: object
          required:
            - code
            - message
          properties:
            code:
              type: number
              description: 'Error code'
              example: 401
            message:
              type: string
              description: 'Text of error'
              example: Authentication Error

    ErrorNotFound:
      type: object
      required:
        - error
      properties:
        error:
          type: object
          required:
            - code
            - message
          properties:
            code:
              type: number
              description: 'Error code'
              example: 404
            message:
              type: string
              description: 'Text of error'
              example: Not Found

    ErrorPreconditionFailed:
      type: object
      required:
        - error
      properties:
        error:
          type: object
          required:
            - code
            - message
          properties:
            code:
              type: number
              description: 'Error code'
              example: 412
            message:
              type: string
              description: 'Text of error'
              example: Precondition Failed

    ErrorInternalServerError:
      type: object
      required:
        - error
      properties:
        error:
          type: object
          required:
            - code
            - message
          properties:
            code:
              type: number
              description: 'Error code'
              example: 500
            message:
              type: string
              description: 'Text of error'
              example: Internal Server Error

    LandingMeta:
      type: object
      required:
        - _id
        - name
        - userId
        - createDate
        - isPublished
        - hasUnpublishedChanges
        - currentVersion
      properties:
        _id:
          type: string
          example: ebhtrt345fPNpnp9B9b9N965
        name:
          type: string
          example: My first landing
        userId:
          type: string
          example: b62klDf0HeiJdNMv8K263nfE
        createDate:
          type: string
          format: date-time
          example: '2016-08-29T09:12:33.001Z'
        updateDate:
          type: string
          format: date-time
          example: '2019-01-07T19:54:07.001Z'
        isPublished:
          type: boolean
          example: true
        hasUnpublishedChanges:
          type: boolean
          example: true
        domain:
          type: string
          example: mylanding.com
        currentVersion:
          type: number
          example: 1

    Landing:
      type: object
      required:
        - slug
        - title
        - settings
        - sections
      properties:
        slug:
          type: string
          example: Landing
        title:
          type: string
          example: ''
        settings:
          type: object
        sections:
          type: array
          items:
            type: object

    LandingFull:
      allOf:
        - $ref: '#/components/schemas/LandingMeta'
        - type: object
          properties:
            landing:
              $ref: '#/components/schemas/Landing'

    UserInfo:
      type: object
      required:
        - mailchimpIntegration
      properties:
        mailchimpIntegration:
          type: boolean
          example: true